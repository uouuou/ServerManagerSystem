(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-65832a85"],{"236b":function(e,t,r){"use strict";r("efee")},"4cee":function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"hand-box"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.editForm({})}}},[e._v("新增用户")]),r("el-dialog",{attrs:{title:"新增",visible:e.isVisible,width:"40%"},on:{"update:visible":function(t){e.isVisible=t},close:e.closeDialog}},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"90px"}},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.id,expression:"form.id"}],attrs:{type:"hidden"},domProps:{value:e.form.id},on:{input:function(t){t.target.composing||e.$set(e.form,"id",t.target.value)}}}),r("el-form-item",{attrs:{prop:"name",label:"用户名:",rules:[{required:!0,message:"请填写内容",trigger:"blur"}]}},[r("el-input",{attrs:{placeholder:"请填写内容"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),r("el-form-item",{attrs:{prop:"role_id",label:"权限设置:",rules:[{required:!0,message:"请选择权限设置",trigger:"change"}]}},[r("el-select",{attrs:{"collapse-tags":"",placeholder:"请选择权限设置"},model:{value:e.form.role_id,callback:function(t){e.$set(e.form,"role_id",t)},expression:"form.role_id"}},e._l(e.roleOption,(function(e){return r("el-option",{key:e.id,attrs:{label:e.role_name,value:e.id}})})),1)],1),r("el-form-item",{attrs:{prop:"password",label:"密码:",rules:[{required:!0,message:"请填写密码",trigger:"blur"}]}},[r("el-input",{attrs:{type:"password",placeholder:"请填写内容"},model:{value:e.form.password,callback:function(t){e.$set(e.form,"password",t)},expression:"form.password"}})],1),r("el-form-item",{attrs:{prop:"cpwd",label:"密码确认:",rules:[{required:!0,message:"请再次输入密码",trigger:"blur"},{validator:e.checkedPass,trigger:"blur"}]}},[r("el-input",{attrs:{type:"password",placeholder:"请填写内容"},model:{value:e.form.cpwd,callback:function(t){e.$set(e.form,"cpwd",t)},expression:"form.cpwd"}})],1),r("el-form-item",{attrs:{prop:"avatar",label:"上传头像:",rules:[{required:!0,message:"选择图片",trigger:"change"}]}},[r("el-upload",{staticClass:"avatar-uploader",attrs:{action:"/api/v1/upload",headers:e.headers,"show-file-list":!1,"on-success":e.handleAvatarSuccess,"before-upload":e.beforeAvatarUpload},model:{value:e.form.avatar,callback:function(t){e.$set(e.form,"avatar",t)},expression:"form.avatar"}},[e.avatar?r("img",{staticClass:"avatar",attrs:{src:e.avatar,width:"60"}}):r("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),r("el-form-item",{attrs:{prop:"email",label:"邮箱:",rules:[{required:!0,message:"请填写内容",trigger:"blur"}]}},[r("el-input",{attrs:{type:"email",placeholder:"请填写内容"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),r("el-form-item",{attrs:{prop:"sc_key",label:"sc_key:"}},[r("el-input",{model:{value:e.form.sc_key,callback:function(t){e.$set(e.form,"sc_key",t)},expression:"form.sc_key"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交")])],1)],1)],1)],1),r("el-table",{attrs:{data:e.sourceList}},[r("el-table-column",{attrs:{prop:"id",label:"ID"}}),r("el-table-column",{attrs:{prop:"name",label:"姓名"}}),r("el-table-column",{attrs:{prop:"role",label:"角色名称"}}),r("el-table-column",{attrs:{prop:"email",label:"邮箱"}}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(r){return e.editForm(t.row)}}},[e._v("修改")]),e._v(" "),r("el-popconfirm",{attrs:{title:"这是一段内容确定删除吗？"},on:{onConfirm:function(r){return e.itemDelete(t.row.id)}}},[r("el-button",{attrs:{slot:"reference",plain:"",type:"danger",size:"small"},slot:"reference"},[e._v("删除")])],1)]}}])})],1),r("pagination",{attrs:{total:e.total_amount,page:e.page,limit:e.page_size},on:{"update:page":function(t){e.page=t},"update:limit":function(t){e.page_size=t},pagination:e.handlePageChange}})],1)},n=[],i=(r("d3b7"),r("3ca3"),r("ddb0"),r("2b3d"),r("fc23")),o=r("90e7"),s={name:"Dashboard",components:{Pagination:i["a"]},data:function(){return{avatar:"",sourceList:[],isVisible:!1,form:{role_id:""},page_size:14,page:1,total_amount:0,roleOption:[],headers:{Authorization:"Bearer ".concat(sessionStorage.getItem("token"))}}},created:function(){var e=this;this.sourceLoad(),Object(o["i"])().then((function(t){var r=t.data;e.roleOption=r}),(function(e){}))},methods:{handleAvatarSuccess:function(e,t){this.avatar=URL.createObjectURL(t.raw),this.form.avatar=e.data.url,this.$refs.form.validateField("avatar")},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},checkedPass:function(e,t,r){""===t?r(new Error("请再次输入密码")):t!==this.form.password?r(new Error("两次输入密码不一致!")):r()},handlePageChange:function(e){this.page=e.pageIndex,this.page_size=e.pageSize,this.sourceLoad()},itemDelete:function(e){var t=this;Object(o["l"])({id:e}).then((function(e){t.$message.success(e.message),t.sourceLoad()}),(function(e){t.$message.error(e.message)}))},closeDialog:function(){this.isVisible=!1,this.form={},this.$refs.form.resetFields(),this.avatar=""},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.form.id?Object(o["n"])(t.form).then((function(e){t.$message.success(e.message),t.sourceLoad(),t.closeDialog()}),(function(e){t.$message.error(e.message)})):Object(o["k"])(t.form).then((function(e){t.$message.success(e.message),t.sourceLoad(),t.isVisible=!1}),(function(e){t.$message.error(e.message)})))}))},editForm:function(e){this.isVisible=!0,e&&(this.avatar=e.avatar),this.form=e},sourceLoad:function(){var e=this,t={page_size:this.page_size,page:this.page};Object(o["m"])(t).then((function(t){e.sourceList=t.data,e.total_amount=t.pages.total_amount}),(function(t){e.$message.error(t.message)}))}}},l=s,u=r("2877"),c=Object(u["a"])(l,a,n,!1,null,null,null);t["default"]=c.exports},"90e7":function(e,t,r){"use strict";r.d(t,"e",(function(){return n})),r.d(t,"f",(function(){return i})),r.d(t,"c",(function(){return o})),r.d(t,"d",(function(){return s})),r.d(t,"m",(function(){return l})),r.d(t,"k",(function(){return u})),r.d(t,"n",(function(){return c})),r.d(t,"l",(function(){return d})),r.d(t,"i",(function(){return f})),r.d(t,"g",(function(){return m})),r.d(t,"j",(function(){return p})),r.d(t,"h",(function(){return g})),r.d(t,"b",(function(){return b})),r.d(t,"a",(function(){return h}));var a=r("751a"),n=function(e){return Object(a["b"])("/v1/setting/menu/list",e)},i=function(e){return Object(a["c"])("/v1/setting/menu/edit",e,"PUT")},o=function(e){return Object(a["c"])("/v1/setting/menu/add",e)},s=function(e){return Object(a["c"])("/v1/setting/menu/del",e,"delete")},l=function(e){return Object(a["b"])("/v1/setting/users/list",e)},u=function(e){return Object(a["c"])("/v1/setting/users/add",e)},c=function(e){return Object(a["c"])("/v1/setting/users/edit",e,"put")},d=function(e){return Object(a["c"])("/v1/setting/users/del",e,"delete")},f=function(e){return Object(a["b"])("/v1/setting/role/list",e)},m=function(e){return Object(a["c"])("/v1/setting/role/add",e)},p=function(e){return Object(a["c"])("/v1/setting/role/edit",e,"put")},g=function(e){return Object(a["c"])("/v1/setting/role/del",e,"delete")},b=function(e){return Object(a["b"])("/v1/setting/file/list",e)},h=function(e){return Object(a["c"])("/v1/setting/file/del",e,"DELETE")}},efee:function(e,t,r){},fc23:function(e,t,r){"use strict";var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"page-box"},[r("el-pagination",{attrs:{background:e.background,"current-page":e.currentPage,"page-size":e.limit,layout:e.layout,"page-sizes":e.pageSizes,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.limit=t},"update:page-size":function(t){e.limit=t},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)},n=[],i=(r("a9e3"),{props:{total:{required:!0,type:Number},page:{type:Number,default:1},limit:{type:Number,default:20},pageSizes:{type:Array,default:function(){return[this.limit,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next, jumper"},background:{type:Boolean,default:!0},autoScroll:{type:Boolean,default:!0},hidden:{type:Boolean,default:!1}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.limit},set:function(e){this.$emit("update:limit",e)}}},methods:{handleSizeChange:function(e){this.$emit("pagination",{pageIndex:1,pageSize:e})},handleCurrentChange:function(e){this.$emit("pagination",{pageIndex:e,pageSize:this.pageSize})}}}),o=i,s=(r("236b"),r("2877")),l=Object(s["a"])(o,a,n,!1,null,null,null);t["a"]=l.exports}}]);